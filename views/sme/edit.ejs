<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Edit Business</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <a href="/sme/businesses" class="btn btn-secondary">Back to Businesses</a>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <form action="/sme/business/<%= business._id %>/edit" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
            <div class="mb-3">
                <label for="name" class="form-label">Business Name</label>
                <input type="text" class="form-control" id="name" name="name" value="<%= business.name %>" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Business Type</label>
                <div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="type" id="typeRetail" value="retail" <%= business.type === 'retail' ? 'checked' : '' %> required>
                        <label class="form-check-label" for="typeRetail">Retail</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="type" id="typeService" value="service" <%= business.type === 'service' ? 'checked' : '' %>>
                        <label class="form-check-label" for="typeService">Service</label>
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label for="category" class="form-label">Category</label>
                <select class="form-select" id="category" name="category" required>
                    <option value="" disabled>Choose...</option>
                    <option value="Food & Beverage" <%= business.category === 'Food & Beverage' ? 'selected' : '' %>>Food & Beverage</option>
                    <option value="Retail" <%= business.category === 'Retail' ? 'selected' : '' %>>Retail</option>
                    <option value="Health & Beauty" <%= business.category === 'Health & Beauty' ? 'selected' : '' %>>Health & Beauty</option>
                    <option value="Home Services" <%= business.category === 'Home Services' ? 'selected' : '' %>>Home Services</option>
                    <option value="Professional Services" <%= business.category === 'Professional Services' ? 'selected' : '' %>>Professional Services</option>
                    <option value="Other" <%= business.category === 'Other' ? 'selected' : '' %>>Other</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" name="description" rows="3" required><%= business.description %></textarea>
            </div>

            <div class="mb-3">
                <label for="address" class="form-label">Address</label>
                <input type="text" class="form-control" id="address" name="address" value="<%= business.address %>" required>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="contactPhone" class="form-label">Contact Phone</label>
                    <input type="text" class="form-control" id="contactPhone" name="contactPhone" value="<%= business.contactPhone %>" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="contactEmail" class="form-label">Contact Email</label>
                    <input type="email" class="form-control" id="contactEmail" name="contactEmail" value="<%= business.contactEmail %>" required>
                </div>
            </div>

            <div class="mb-3">
                <label for="hours" class="form-label">Business Hours (Optional)</label>
                <input type="text" class="form-control" id="hours" name="hours" placeholder="e.g. Mon-Fri 9am-5pm" value="<%= business.hours %>">
            </div>

            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="status" name="status" value="active" <%= business.status === 'active' ? 'checked' : '' %>>
                <label class="form-check-label" for="status">Active</label>
            </div>

            <div class="mb-3">
                <label for="image" class="form-label">Business Image</label>
                <% if (business.image) { %>
                    <div class="mb-2">
                        <img src="<%= business.image %>" alt="Current Image" class="img-thumbnail" style="max-height: 200px;">
                    </div>
                <% } %>
                <input type="file" class="form-control" id="image" name="image" accept="image/*">
                <div class="form-text">Leave blank to keep current image.</div>
            </div>

            <button type="submit" class="btn btn-primary">Update Business</button>
            <a href="/sme/businesses" class="btn btn-secondary">Cancel</a>
        </form>
    </div>
</div>
